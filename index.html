<!DOCTYPE html>
<html>
  <head>
    <meta charset="UFT-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Marvel Characters!</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet"  href="./develop/style.css"/>
  </head>
  
   <header> 
  <section class="section">
    <div class="container">
      <h1 class="title">Marvel Movies and Comics Searcher!</h1>
        <img id="backgimg" src="" alt="background"/>
      <h2 class="subtitle">Navigation bar</h2>
    </header>
    <!-- This is the Nav area-->
      <div class="is-flex is-flex-direction-column">
        <h2 class="subtitle is-flex is-justify-content-center">Navigation bar</h2>
        <div class="navbar">
          <img id="Spider-Man/1009610" class="clickable" src="assets/images/spiderman.jpg" alt="Spider-Man" />
          <img id="Capitan America/1009220" class="clickable" src="assets\images\captainamerica.jpg" alt="Capitan America" />
          <img id="Iron Man/1009368" class="clickable" src="assets/images/ironman.jpg" alt="Iron Man" />
          <img id="Thor/1009664" class="clickable" src="assets/images/thor.jpg" alt="Thor" />
          <img id="Hulk/1009351" class="clickable" src="assets\images\hulk.png" alt="Hulk" />
      </div>
    </div>
    <!--This is where the favorites and movie/comic results are-->
    <div class ="is-flex is-flex-direction-column">
      <section id = "favorite" class="is-flex is-flex-direction-row">
        <h2 class="categories">Favorited</h2>
        <div id="favorites">

        </div>
      </section>
      <section id = "Movies" class="is-flex is-flex-direction-row">
        <h2 class="categories">Movie Results</h2>
        <div  id ="MovieRes" >

        </div>
      </section>
      <section id = Comics class="is-flex is-flex-direction-row">
        <h2 class="categories">Comic Results</h2>
        <!-- <img id="cres" src="" alt="cres"/> -->
        <div id="Comicres">

        </div>
      </section>
    </div>
  </section>
  <script>
        function getMovieList(searchTerm) {
  var requestUrl = 'http://www.omdbapi.com/?apikey=40a1c6b7&s=' + searchTerm;

  fetch(requestUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (data) {
      // Check if there are movies in the search results
      if (data.Search && data.Search.length > 0) {
        // Get a random index within the range of the search results array
        var randomIndex = Math.floor(Math.random() * data.Search.length);

        // Use the random index to get the poster URL of a random movie
        var posterUrl = data.Search[randomIndex].Poster;

        // Update the background image using the random movie's poster URL
        document.getElementById('backgimg').src = posterUrl;
      } else {
        console.log("No movies found for the search term: " + searchTerm);
      }
    });
}

// Call the getMovieList function with your desired search term
getMovieList('spider-man');

function getComicList(searchTerm) {
  var apikey = "f2a2353663e07a9ca6af17c5824f353f";
  var privkey = "fc7aae4a19c48bc5908b84830888822a34e57e713";
  var ts = new Date().getTime().toString(); // Use the current timestamp
  var passhash = CryptoJS.MD5(ts + privkey + apikey).toString();
  console.log(passhash);

  var requestUrl = `https://gateway.marvel.com:443/v1/public/characters/${searchTerm}/comics?limit=50&ts=${ts}&hash=${passhash}&apikey=${apikey}`;

  fetch(requestUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (data) {
      var cresElement = document.getElementById("cres");

      // Check if there are comics in the search results
      if (data.data && data.data.results.length > 0) {
        // Get a random index within the range of the comic results array
        var randomIndex = Math.floor(Math.random() * data.data.results.length);

        // Use the random index to get the comic thumbnail URL
        var comicThumbnail = data.data.results[randomIndex].thumbnail;

        // Create an image element for the comic thumbnail
        var comicImg = document.createElement('img');
        comicImg.src = comicThumbnail.path + '/portrait_incredible.' + comicThumbnail.extension;
        comicImg.alt = data.data.results[randomIndex].title;

        // Clear previous results
        cresElement.innerHTML = '';

        // Append the comic image to the "cres" element
        cresElement.appendChild(comicImg);
      } else {
        // If no comics found, display a message
        cresElement.innerHTML = 'No comics found for the character: ' + searchTerm;
      }
    })
    .catch(function (error) {
      console.error('Error:', error);
    });
}

// Call the getComicList function with your desired search term
getComicList('1009610'); // This will retrieve comics for Spider-Man
    </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/core.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js"></script>
    <script src="./develop/script.js"></script>
  </body>
</html>